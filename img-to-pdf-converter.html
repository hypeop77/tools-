<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Free online tool to convert multiple images to a single PDF document. Supports JPG, PNG, WEBP formats with drag-and-drop reordering." />
<meta name="keywords" content="image to pdf, jpg to pdf, png to pdf, webp to pdf, convert images to pdf, free pdf converter" />
<title>ImageToPDF - Convert Images to PDF Online</title>

<!-- Include AdSense script only once in head -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-5117734305838946" crossorigin="anonymous"></script>

<!-- External libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.16.0/pdf-lib.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Your CSS styles -->
<style>
/* Your CSS code remains the same, omitted here for brevity. Please copy all your CSS from your code above. */
:root {
  /* Sky & Slate Color Theme */
  --primary: #3B82F6;
  --primary-dark: #60A5FA;
  --accent: #FBBF24;
  --accent-dark: #FACC15;
  --bg-light: #F9FAFB;
  --bg-dark: #111827;
  --surface-light: #FFFFFF;
  --surface-dark: #1F2937;
  --text-light: #1F2937;
  --text-dark: #F3F4F6;
  --border-light: #E5E7EB;
  --border-dark: #374151;
  --shadow-light: rgba(0, 0, 0, 0.1);
  --shadow-dark: rgba(0, 0, 0, 0.3);
  --error-light: #EF4444;
  --error-dark: #F87171;
  --success-light: #10B981;
  --success-dark: #34D399;
}
[data-theme="dark"] { /* dark theme variables */ }
[data-theme="light"] { /* light theme variables */ }
/* ... Rest of your CSS code ... */
* { margin: 0; padding: 0; box-sizing: border-box; transition: background-color 0.3s, color 0.3s, border-color 0.3s; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--bg-color); padding: 20px; min-height: 100vh; }
/* Continue with your CSS as provided... */
.container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
h1 { color: var(--primary); margin-bottom: 10px; font-size: 2.2rem; font-weight: 700; letter-spacing: -0.025em; }
.subtitle { color: var(--text-muted); font-size: 1.1rem; max-width: 700px; margin: 0 auto; font-weight: 400; }
.theme-toggle { position: absolute; top: 20px; right: 20px; background: none; border: none; cursor: pointer; font-size: 1.5rem; color: var(--text-color); padding: 8px; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
.theme-toggle:hover { background-color: rgba(0, 0, 0, 0.05); }
[data-theme="dark"] .theme-toggle:hover { background-color: rgba(255, 255, 255, 0.05); }
.ad-container { width: 100%; margin: 20px 0; padding: 15px; background-color: var(--surface); border-radius: 12px; box-shadow: 0 4px 6px var(--shadow-color); text-align: center; min-height: 90px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--border-color); }
.ad-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.05em; }
/* ... rest of your CSS ... */
</style>
</head>
<body>
<div class="container">
    <!-- Theme toggle button -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">üåì</button>
    
    <!-- Header -->
    <header>
        <h1>Image to PDF Converter</h1>
        <p class="subtitle">Upload multiple images (JPG, PNG, WEBP) and convert them to a single PDF document with drag-and-drop reordering.</p>
    </header>
    
    <!-- Top Ad Unit -->
    <div class="ad-container">
        <div>
            <div class="ad-label">Advertisement</div>
            <div id="ad-unit-top">
                <!-- AdSense Ad -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-app-pub-5117734305838946"
                     data-ad-slot="7204353933"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
            </div>
        </div>
    </div>
    
    <!-- Main tool container -->
    <div class="tool-container">
        <!-- Upload section -->
        <section class="upload-section">
            <h2 class="section-title">
                <span class="badge">1</span> Upload Images
            </h2>
            <div class="upload-area" id="upload-area">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">Click to browse or drag & drop images</div>
                <div class="upload-hint">Supports JPG, PNG, WEBP (Max 10MB per file)</div>
                <input type="file" id="file-input" accept="image/jpeg,image/png,image/webp" multiple>
            </div>
            <div class="controls">
                <button class="btn btn-primary" id="add-files-btn">
                    <span>üìÅ</span> Add Images
                </button>
                <button class="btn btn-secondary" id="generate-pdf-btn" disabled>
                    <span>üìÑ</span> Generate PDF
                </button>
                <button class="btn btn-outline" id="clear-all-btn" disabled>
                    <span>üóëÔ∏è</span> Clear All
                </button>
            </div>
        </section>
        
        <!-- Middle Ad Unit -->
        <div class="ad-container">
            <div>
                <div class="ad-label">Advertisement</div>
                <div id="ad-unit-middle">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-app-pub-5117734305838946"
                         data-ad-slot="7204353933"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
            </div>
        </div>
        
        <!-- Preview & Settings -->
        <section class="preview-section">
            <h2 class="section-title">
                <span class="badge">2</span> Image Preview & Order
                <span id="image-count" style="font-size: 0.9rem; color: var(--text-muted); margin-left: auto;">0 images</span>
            </h2>
            <div class="pdf-settings">
                <div class="setting-group">
                    <label for="pdf-filename">PDF Filename</label>
                    <input type="text" id="pdf-filename" placeholder="output.pdf" value="output.pdf" />
                </div>
                <div class="setting-group">
                    <label for="pdf-page-size">Page Size</label>
                    <select id="pdf-page-size">
                        <option value="A4">A4</option>
                        <option value="Letter">Letter</option>
                        <option value="A5">A5</option>
                        <option value="A3">A3</option>
                        <option value="match">Match Image Size</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label for="pdf-orientation">Orientation</label>
                    <select id="pdf-orientation">
                        <option value="portrait">Portrait</option>
                        <option value="landscape">Landscape</option>
                        <option value="auto">Auto (Match Image)</option>
                    </select>
                </div>
            </div>
            <div class="image-grid" id="image-grid">
                <div class="empty-state">
                    <div class="empty-icon">üñºÔ∏è</div>
                    <div class="empty-text">No images uploaded yet</div>
                </div>
            </div>
        </section>
        
        <!-- Bottom Ad Unit -->
        <div class="ad-container">
            <div>
                <div class="ad-label">Advertisement</div>
                <div id="ad-unit-bottom">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-app-pub-5117734305838946"
                         data-ad-slot="7204353933"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
            </div>
        </div>
    </div> <!-- End of tool-container -->
    
    <!-- Loading overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Generating PDF...</div>
        </div>
    </div>
    
    <!-- Toast notification -->
    <div class="toast" id="toast"></div>
</div> <!-- End of container -->

<!-- All scripts -->
<script>
  // Initialize ads after DOM loads
  document.addEventListener('DOMContentLoaded', function() {
    // Push ads to display
    (adsbygoogle = window.adsbygoogle || []).push({});
  });

  // Your previous JavaScript code from your original file
  // (Copy all your existing script code here, starting from 'document.addEventListener...')
  document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const fileInput = document.getElementById('file-input');
    const uploadArea = document.getElementById('upload-area');
    const addFilesBtn = document.getElementById('add-files-btn');
    const generatePdfBtn = document.getElementById('generate-pdf-btn');
    const clearAllBtn = document.getElementById('clear-all-btn');
    const imageGrid = document.getElementById('image-grid');
    const imageCount = document.getElementById('image-count');
    const pdfFilename = document.getElementById('pdf-filename');
    const pdfPageSize = document.getElementById('pdf-page-size');
    const pdfOrientation = document.getElementById('pdf-orientation');
    const loadingOverlay = document.getElementById('loading-overlay');
    const toast = document.getElementById('toast');
    const themeToggle = document.getElementById('theme-toggle');

    // State
    let images = [];
    let draggedItem = null;

    // Initialize theme based on user preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    let currentTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', currentTheme);
    themeToggle.textContent = currentTheme === 'dark' ? 'üåû' : 'üåí';

    // Theme toggle
    themeToggle.addEventListener('click', () => {
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      themeToggle.textContent = newTheme === 'dark' ? 'üåû' : 'üåí';
      currentTheme = newTheme;
    });

    // Upload handlers
    uploadArea.addEventListener('click', () => fileInput.click());
    document.getElementById('add-files-btn').addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', handleFileSelect);
    uploadArea.addEventListener('dragover', handleDragOver);
    uploadArea.addEventListener('dragleave', handleDragLeave);
    uploadArea.addEventListener('drop', handleDrop);
    document.getElementById('generate-pdf-btn').addEventListener('click', generatePDF);
    document.getElementById('clear-all-btn').addEventListener('click', clearAllImages);

    // File select
    function handleFileSelect(e) {
      const files = e.target.files;
      if (files.length > 0) processFiles(files);
      e.target.value = '';
    }

    // Drag & drop
    function handleDragOver(e) {
      e.preventDefault(); e.stopPropagation();
      uploadArea.classList.add('active');
    }
    function handleDragLeave(e) {
      e.preventDefault(); e.stopPropagation();
      uploadArea.classList.remove('active');
    }
    function handleDrop(e) {
      e.preventDefault(); e.stopPropagation();
      uploadArea.classList.remove('active');
      processFiles(e.dataTransfer.files);
    }

    // Process files
    function processFiles(files) {
      const validTypes = ['image/jpeg','image/png','image/webp'];
      const maxSize = 10 * 1024 * 1024;
      const maxFiles = 25; // increase from 20 to 25
      if (images.length + files.length > maxFiles) {
        showToast(`Maximum ${maxFiles} images`, 'error');
        return;
      }
      Array.from(files).forEach(file => {
        if (!validTypes.includes(file.type)) {
          showToast(`Skipped ${file.name}: Unsupported type`, 'error');
          return;
        }
        if (file.size > maxSize) {
          showToast(`Skipped ${file.name}: File too large`, 'error');
          return;
        }
        const reader = new FileReader();
        reader.onload = e => {
          images.push({ id: Date.now() + Math.random(), file, dataUrl: e.target.result });
          updateUI();
        };
        reader.readAsDataURL(file);
      });
    }

    // UI updates
    function updateUI() {
      if (images.length === 0) {
        imageGrid.innerHTML = `<div class="empty-state"><div class="empty-icon">üñºÔ∏è</div><div class="empty-text">No images uploaded yet</div></div>`;
        document.getElementById('generate-pdf-btn').disabled = true;
        document.getElementById('clear-all-btn').disabled = true;
        imageCount.textContent = '0 images';
        return;
      }
      document.getElementById('generate-pdf-btn').disabled = false;
      document.getElementById('clear-all-btn').disabled = false;
      imageCount.textContent = `${images.length} image${images.length !== 1 ? 's' : ''}`;
      // Render images
      imageGrid.innerHTML = '';
      images.forEach((img, index) => {
        const el = document.createElement('div');
        el.className = 'image-item';
        el.draggable = true;
        el.dataset.id = img.id;
        el.innerHTML = `
          <img src="${img.dataUrl}" alt="${img.file.name}">
          <div class="image-actions">
            <button class="action-btn move-up-btn" title="Move up">‚¨ÜÔ∏è</button>
            <button class="action-btn move-down-btn" title="Move down">‚¨áÔ∏è</button>
            <button class="action-btn delete-btn" title="Delete">‚ùå</button>
          </div>
          <div class="image-index">${index + 1}</div>
        `;
        imageGrid.appendChild(el);
        // buttons
        el.querySelector('.move-up-btn').addEventListener('click', () => moveImageUp(img.id));
        el.querySelector('.move-down-btn').addEventListener('click', () => moveImageDown(img.id));
        el.querySelector('.delete-btn').addEventListener('click', () => { deleteImage(img.id); });
        // drag events
        el.addEventListener('dragstart', handleDragStart);
        el.addEventListener('dragover', handleDragOverItem);
        el.addEventListener('dragleave', handleDragLeaveItem);
        el.addEventListener('drop', handleDropItem);
        el.addEventListener('dragend', handleDragEnd);
      });
    }

    // Drag & drop
    let draggedItem = null;
    function handleDragStart(e) {
      draggedItem = e.target;
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/html', e.target.innerHTML);
      e.target.classList.add('dragging');
    }
    function handleDragOverItem(e) {
      e.preventDefault();
      const target = e.target.closest('.image-item');
      if (target && target !== draggedItem) {
        const rect = target.getBoundingClientRect();
        const next = (e.clientY - rect.top) > (rect.bottom - rect.top) / 2;
        imageGrid.insertBefore(draggedItem, next ? target.nextSibling : target);
      }
    }
    function handleDragLeaveItem(e) { e.preventDefault(); }
    function handleDropItem(e) { e.preventDefault(); }
    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      // reorder images array
      const newImages = [];
      document.querySelectorAll('.image-item').forEach(item => {
        const id = item.dataset.id;
        const img = images.find(i => i.id === id);
        if (img) newImages.push(img);
      });
      images = newImages;
      updateUI();
    }

    function moveImageUp(id) {
      const index = images.findIndex(i => i.id === id);
      if (index > 0) {
        [images[index - 1], images[index]] = [images[index], images[index - 1]];
        updateUI();
      }
    }
    function moveImageDown(id) {
      const index = images.findIndex(i => i.id === id);
      if (index < images.length - 1) {
        [images[index], images[index + 1]] = [images[index + 1], images[index]];
        updateUI();
      }
    }
    function deleteImage(id) {
      images = images.filter(i => i.id !== id);
      updateUI();
    }

    // Generate PDF
    async function generatePDF() {
      if (images.length === 0) {
        showToast('No images to convert', 'error');
        return;
      }
      document.getElementById('loading-overlay').classList.add('active');
      try {
        const { PDFDocument, rgb } = PDFLib;
        const pdfDoc = await PDFDocument.create();
        const pageSize = pdfPageSize.value;
        const orientation = pdfOrientation.value;
        const filename = pdfFilename.value.endsWith('.pdf') ? pdfFilename.value : `${pdfFilename.value}.pdf`;

        for (const image of images) {
          let img;
          try {
            if (image.file.type === 'image/jpeg') {
              img = await pdfDoc.embedJpg(image.dataUrl);
            } else if (image.file.type === 'image/png') {
              img = await pdfDoc.embedPng(image.dataUrl);
            } else if (image.file.type === 'image/webp') {
              const pngDataUrl = await convertWebpToPng(image.dataUrl);
              img = await pdfDoc.embedPng(pngDataUrl);
            } else continue;
          } catch(e) {
            console.error('Error embedding image', e);
            showToast(`Error processing ${image.file.name}`, 'error');
            continue;
          }

          let pageWidth, pageHeight;
          if (pageSize === 'match') {
            pageWidth = img.width;
            pageHeight = img.height;
          } else {
            const sizes = {
              'A4': [595.28, 841.89],
              'Letter': [612, 792],
              'A5': [420.94, 595.28],
              'A3': [841.89, 1190.55]
            };
            [pageWidth, pageHeight] = sizes[pageSize];
            if (orientation === 'landscape') [pageWidth, pageHeight] = [pageHeight, pageWidth];
            if (orientation === 'auto' && img.width > img.height) [pageWidth, pageHeight] = [pageHeight, pageWidth];
          }

          const page = pdfDoc.addPage([pageWidth, pageHeight]);
          let width, height;
          if (pageSize === 'match') {
            width = img.width;
            height = img.height;
          } else {
            const scale = Math.min(pageWidth / img.width, pageHeight / img.height);
            width = img.width * scale;
            height = img.height * scale;
          }
          const x = (pageWidth - width) / 2;
          const y = (pageHeight - height) / 2;
          page.drawImage(img, { x, y, width, height });
        }
        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        saveAs(blob, filename);
        showToast('PDF generated successfully!', 'success');
      } catch (e) {
        console.error('Error generating PDF', e);
        showToast('Error generating PDF. Please try again.', 'error');
      } finally {
        document.getElementById('loading-overlay').classList.remove('active');
      }
    }

    async function convertWebpToPng(dataUrl) {
      return new Promise((resolve) => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas');
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0);
          resolve(canvas.toDataURL('image/png'));
        };
        img.src = dataUrl;
      });
    }

    function clearAllImages() {
      images = [];
      updateUI();
      showToast('All images cleared', 'success');
    }

    function showToast(message, type) {
      toast.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Theme toggle
    document.getElementById('theme-toggle').addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const newTheme = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      document.getElementById('theme-toggle').textContent = newTheme === 'dark' ? 'üåû' : 'üåí';
    });
  });
</script>
</body>
</html>
